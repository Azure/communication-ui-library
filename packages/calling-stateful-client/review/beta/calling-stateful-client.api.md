## API Report File for "@internal/calling-stateful-client"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { AudioDeviceInfo } from '@azure/communication-calling';
import { Call } from '@azure/communication-calling';
import { CallAgent } from '@azure/communication-calling';
import { CallAgentCommon as CallAgentCommon_2 } from '@azure/communication-calling';
import { CallClient } from '@azure/communication-calling';
import { CallClientOptions } from '@azure/communication-calling';
import { CallCommon as CallCommon_2 } from '@azure/communication-calling';
import { CallDirection } from '@azure/communication-calling';
import { CallEndReason } from '@azure/communication-calling';
import { CallerInfo } from '@azure/communication-calling';
import { CallKind } from '@azure/communication-calling';
import { CallState as CallState_2 } from '@azure/communication-calling';
import { CaptionsResultType } from '@azure/communication-calling';
import { CommunicationIdentifier } from '@azure/communication-common';
import { CommunicationIdentifierKind } from '@azure/communication-common';
import { CommunicationUserIdentifier } from '@azure/communication-common';
import { CommunicationUserKind } from '@azure/communication-common';
import { CreateViewOptions } from '@azure/communication-calling';
import { DeviceAccess } from '@azure/communication-calling';
import { DeviceManager } from '@azure/communication-calling';
import { DominantSpeakersInfo } from '@azure/communication-calling';
import { EnvironmentInfo } from '@azure/communication-calling';
import { IncomingCall } from '@azure/communication-calling';
import { IncomingCallCommon as IncomingCallCommon_2 } from '@azure/communication-calling';
import { LatestMediaDiagnostics } from '@azure/communication-calling';
import { LatestNetworkDiagnostics } from '@azure/communication-calling';
import { LocalVideoStream } from '@azure/communication-calling';
import { MediaStreamType } from '@azure/communication-calling';
import { MicrosoftTeamsUserIdentifier } from '@azure/communication-common';
import { MicrosoftTeamsUserKind } from '@azure/communication-common';
import { ParticipantRole } from '@azure/communication-calling';
import { PhoneNumberKind } from '@azure/communication-common';
import { RemoteParticipantState as RemoteParticipantState_2 } from '@azure/communication-calling';
import { ScalingMode } from '@azure/communication-calling';
import { TeamsCall as TeamsCall_2 } from '@azure/communication-calling';
import { TeamsCallAgent as TeamsCallAgent_2 } from '@azure/communication-calling';
import { UnknownIdentifierKind } from '@azure/communication-common';
import { VideoDeviceInfo } from '@azure/communication-calling';
import { VideoEffectName } from '@azure/communication-calling';
import { VideoStreamRenderer } from '@azure/communication-calling';
import { VideoStreamRendererView } from '@azure/communication-calling';

// @public
export type CallAgentCommon = CallAgent | /* @conditional-compile-remove(teams-identity-support) */ CallAgentCommon_2;

// @public
export interface CallAgentState {
    displayName?: string;
}

// @public
export interface CallClientState {
    alternateCallerId?: string;
    callAgent?: CallAgentState;
    calls: {
        [key: string]: CallState;
    };
    callsEnded: {
        [key: string]: CallState;
    };
    deviceManager: DeviceManagerState;
    environmentInfo?: EnvironmentInfo;
    incomingCalls: {
        [key: string]: IncomingCallState;
    };
    incomingCallsEnded: {
        [key: string]: IncomingCallState;
    };
    latestErrors: CallErrors;
    userId: CommunicationIdentifierKind;
}

// @public
export type CallCommon = Call | /* @conditional-compile-remove(teams-identity-support) */ CallCommon_2;

// @public
export class CallError extends Error {
    constructor(target: CallErrorTarget, innerError: Error, timestamp?: Date);
    innerError: Error;
    target: CallErrorTarget;
    timestamp: Date;
}

// @public
export type CallErrors = {
    [target in CallErrorTarget]: CallError;
};

// @public
export type CallErrorTarget = 'Call.addParticipant' | 'Call.dispose' | 'Call.feature' | 'Call.hangUp' | 'Call.hold' | 'Call.mute' | /* @conditional-compile-remove(calling-beta-sdk) */ 'Call.muteIncomingAudio' | 'Call.off' | 'Call.on' | 'Call.removeParticipant' | 'Call.resume' | 'Call.sendDtmf' | /* @conditional-compile-remove(calling-beta-sdk) */ 'Call.startAudio' | 'Call.startScreenSharing' | 'Call.startVideo' | 'Call.stopScreenSharing' | /* @conditional-compile-remove(calling-beta-sdk) */ 'Call.stopAudio' | 'Call.stopVideo' | 'Call.unmute' | /* @conditional-compile-remove(calling-beta-sdk) */ 'Call.unmuteIncomingAudio' | 'CallAgent.dispose' | 'CallAgent.feature' | 'CallAgent.join' | 'CallAgent.off' | 'CallAgent.on' | 'CallAgent.startCall' | 'CallClient.createCallAgent' | 'CallClient.createTeamsCallAgent' | 'CallClient.feature' | 'CallClient.getDeviceManager' | /* @conditional-compile-remove(calling-beta-sdk) */ 'CallClient.getEnvironmentInfo' | 'DeviceManager.askDevicePermission' | 'DeviceManager.getCameras' | 'DeviceManager.getMicrophones' | 'DeviceManager.getSpeakers' | 'DeviceManager.off' | 'DeviceManager.on' | 'DeviceManager.selectMicrophone' | 'DeviceManager.selectSpeaker' | 'IncomingCall.accept' | 'IncomingCall.reject' | /* @conditional-compile-remove(calling-beta-sdk) */ /* @conditional-compile-remove(teams-identity-support) */ 'TeamsCall.addParticipant' | /* @conditional-compile-remove(video-background-effects) */ 'VideoEffectsFeature.startEffects' | /* @conditional-compile-remove(calling-beta-sdk) */ 'CallAgent.handlePushNotification' | /* @conditional-compile-remove(calling-beta-sdk) */ 'Call.admit' | /* @conditional-compile-remove(calling-beta-sdk) */ 'Call.rejectParticipant' | /* @conditional-compile-remove(calling-beta-sdk) */ 'Call.admitAll';

// @public
export interface CallState {
    callEndReason?: CallEndReason;
    callerInfo: CallerInfo;
    captionsFeature: CaptionsCallFeatureState;
    diagnostics: DiagnosticsCallFeatureState;
    direction: CallDirection;
    dominantSpeakers?: DominantSpeakersInfo;
    endTime: Date | undefined;
    id: string;
    isMuted: boolean;
    isScreenSharingOn: boolean;
    kind: CallKind;
    localVideoStreams: LocalVideoStreamState[];
    recording: RecordingCallFeature;
    remoteParticipants: {
        [keys: string]: RemoteParticipantState;
    };
    remoteParticipantsEnded: {
        [keys: string]: RemoteParticipantState;
    };
    role?: ParticipantRole;
    screenShareRemoteParticipant?: string;
    startTime: Date;
    state: CallState_2;
    totalParticipantCount?: number;
    transcription: TranscriptionCallFeature;
}

// @beta (undocumented)
export interface CaptionsCallFeatureState {
    captions: CaptionsInfo[];
    currentCaptionLanguage: string;
    currentSpokenLanguage: string;
    isCaptionsFeatureActive: boolean;
    supportedCaptionLanguages: string[];
    supportedSpokenLanguages: string[];
}

// @beta (undocumented)
export interface CaptionsInfo {
    captionLanguage?: string;
    captionText: string;
    resultType: CaptionsResultType;
    speaker: CallerInfo;
    spokenLanguage: string;
    spokenText?: string;
    timestamp: Date;
}

// @public
export const createStatefulCallClient: (args: StatefulCallClientArgs, options?: StatefulCallClientOptions | undefined) => StatefulCallClient;

// @public
export type CreateViewResult = {
    renderer: VideoStreamRenderer;
    view: VideoStreamRendererView;
};

// @beta
export type DeclarativeCallAgent = CallAgent & IncomingCallManagement;

// @beta
export type DeclarativeIncomingCall = IncomingCall;

// @public
export type DeviceManagerState = {
    isSpeakerSelectionAvailable: boolean;
    selectedMicrophone?: AudioDeviceInfo;
    selectedSpeaker?: AudioDeviceInfo;
    selectedCamera?: VideoDeviceInfo;
    cameras: VideoDeviceInfo[];
    microphones: AudioDeviceInfo[];
    speakers: AudioDeviceInfo[];
    deviceAccess?: DeviceAccess;
    unparentedViews: LocalVideoStreamState[];
};

// @public
export interface DiagnosticsCallFeatureState {
    media: MediaDiagnosticsState;
    network: NetworkDiagnosticsState;
}

// @public
export type IncomingCallCommon = IncomingCall | /* @conditional-compile-remove(teams-identity-support) */ IncomingCallCommon_2;

// @beta
export type IncomingCallManagement = {
    incomingCalls: ReadonlyArray<DeclarativeIncomingCall>;
};

// @public
export interface IncomingCallState {
    callEndReason?: CallEndReason;
    callerInfo: CallerInfo;
    endTime?: Date;
    id: string;
    startTime: Date;
}

// @internal (undocumented)
export const _isACSCall: (call: CallCommon) => call is Call;

// @internal (undocumented)
export const _isACSCallAgent: (callAgent: CallAgentCommon) => callAgent is CallAgent;

// @internal (undocumented)
export const _isTeamsCall: (call: CallCommon) => call is TeamsCall_2;

// @internal (undocumented)
export const _isTeamsCallAgent: (callAgent: CallAgentCommon) => callAgent is TeamsCallAgent_2;

// @public
export interface LocalVideoStreamState {
    mediaStreamType: MediaStreamType;
    source: VideoDeviceInfo;
    // @beta
    videoEffects?: LocalVideoStreamVideoEffectsState;
    view?: VideoStreamRendererViewState;
}

// @beta
export interface LocalVideoStreamVideoEffectsState {
    effectName?: VideoEffectName;
    isActive: boolean;
}

// @public
export interface MediaDiagnosticsState {
    // (undocumented)
    latest: LatestMediaDiagnostics;
}

// @public
export interface NetworkDiagnosticsState {
    // (undocumented)
    latest: LatestNetworkDiagnostics;
}

// @public
export interface RecordingCallFeature {
    isRecordingActive: boolean;
}

// @public
export interface RemoteParticipantState {
    callEndReason?: CallEndReason;
    displayName?: string;
    identifier: CommunicationUserKind | PhoneNumberKind | MicrosoftTeamsUserKind | UnknownIdentifierKind;
    isMuted: boolean;
    isSpeaking: boolean;
    role?: ParticipantRole;
    state: RemoteParticipantState_2;
    videoStreams: {
        [key: number]: RemoteVideoStreamState;
    };
}

// @public
export interface RemoteVideoStreamState {
    id: number;
    isAvailable: boolean;
    // @beta
    isReceiving: boolean;
    mediaStreamType: MediaStreamType;
    view?: VideoStreamRendererViewState;
}

// @public
export interface StatefulCallClient extends CallClient {
    createCallAgent(...args: Parameters<CallClient['createCallAgent']>): Promise<DeclarativeCallAgent>;
    createView(callId: string | undefined, participantId: CommunicationIdentifier | undefined, stream: LocalVideoStreamState | RemoteVideoStreamState, options?: CreateViewOptions): Promise<CreateViewResult | undefined>;
    disposeView(callId: string | undefined, participantId: CommunicationIdentifier | undefined, stream: LocalVideoStreamState | RemoteVideoStreamState): void;
    getState(): CallClientState;
    offStateChange(handler: (state: CallClientState) => void): void;
    onStateChange(handler: (state: CallClientState) => void): void;
}

// @public
export type StatefulCallClientArgs = {
    userId: CommunicationUserIdentifier | /* @conditional-compile-remove(teams-identity-support) */ MicrosoftTeamsUserIdentifier;
    alternateCallerId?: string;
};

// @public
export type StatefulCallClientOptions = {
    callClientOptions: CallClientOptions;
    maxStateChangeListeners?: number;
};

// @public
export interface StatefulDeviceManager extends DeviceManager {
    // @beta
    getUnparentedVideoStreams: () => LocalVideoStream[];
    selectCamera: (VideoDeviceInfo: any) => void;
}

// @beta (undocumented)
export type TeamsCall = never | /* @conditional-compile-remove(teams-identity-support) */ TeamsCall_2;

// @beta (undocumented)
export type TeamsCallAgent = never | /* @conditional-compile-remove(teams-identity-support) */ TeamsCallAgent_2;

// @public
export interface TranscriptionCallFeature {
    isTranscriptionActive: boolean;
}

// @public
export interface VideoStreamRendererViewState {
    isMirrored: boolean;
    scalingMode: ScalingMode;
    target: HTMLElement;
}

// (No @packageDocumentation comment for this package)

```
