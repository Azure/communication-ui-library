## API Report File for "@internal/chat-stateful-client"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { ChatClient } from '@azure/communication-chat';
import { ChatClientOptions } from '@azure/communication-chat';
import { ChatMessage } from '@azure/communication-chat';
import { ChatMessageReadReceipt } from '@azure/communication-chat';
import { ChatParticipant } from '@azure/communication-chat';
import { CommunicationIdentifierKind } from '@azure/communication-common';
import { CommunicationTokenCredential } from '@azure/communication-common';
import { CommunicationUserIdentifier } from '@azure/communication-common';
import { MessageStatus } from '@internal/acs-ui-common';
import { _TelemetryImplementationHint } from '@internal/acs-ui-common';
import { TypingIndicatorReceivedEvent } from '@azure/communication-chat';

// @public
export type ChatClientState = {
    userId: CommunicationIdentifierKind;
    displayName: string;
    threads: {
        [key: string]: ChatThreadClientState;
    };
    latestErrors: ChatErrors;
};

// @internal (undocumented)
export class _ChatContext {
    constructor(maxListeners?: number);
    // (undocumented)
    addReadReceipt(threadId: string, readReceipt: ChatMessageReadReceipt): void;
    // (undocumented)
    addTypingIndicator(threadId: string, typingIndicator: TypingIndicatorReceivedEvent): void;
    batch(operations: () => void): void;
    // (undocumented)
    createThread(threadId: string, properties?: ChatThreadProperties): void;
    // (undocumented)
    createThreadIfNotExist(threadId: string, properties?: ChatThreadProperties): boolean;
    // (undocumented)
    deleteLocalMessage(threadId: string, localId: string): boolean;
    // (undocumented)
    deleteMessage(threadId: string, id: string): void;
    // (undocumented)
    deleteParticipant(threadId: string, participantId: CommunicationIdentifierKind): void;
    // (undocumented)
    deleteParticipants(threadId: string, participantIds: CommunicationIdentifierKind[]): void;
    // (undocumented)
    deleteThread(threadId: string): void;
    // (undocumented)
    getState(): ChatClientState;
    // (undocumented)
    modifyState(modifier: (draft: ChatClientState) => void): void;
    // (undocumented)
    offStateChange(handler: (state: ChatClientState) => void): void;
    // (undocumented)
    onStateChange(handler: (state: ChatClientState) => void): void;
    // (undocumented)
    setChatMessage(threadId: string, message: ChatMessageWithStatus): void;
    // (undocumented)
    setChatMessages(threadId: string, messages: {
        [key: string]: ChatMessageWithStatus;
    }): void;
    // (undocumented)
    setParticipant(threadId: string, participant: ChatParticipant): void;
    // (undocumented)
    setParticipants(threadId: string, participants: ChatParticipant[]): void;
    // (undocumented)
    setThread(threadId: string, threadState: ChatThreadClientState): void;
    // (undocumented)
    updateChatConfig(userId: CommunicationIdentifierKind, displayName: string): void;
    // (undocumented)
    updateChatMessageContent(threadId: string, messagesId: string, content: string | undefined): void;
    // (undocumented)
    updateThread(threadId: string, properties?: ChatThreadProperties): void;
    // (undocumented)
    updateThreadTopic(threadId: string, topic?: string): void;
    withAsyncErrorTeedToState<Args extends unknown[], R>(f: (...args: Args) => Promise<R>, target: ChatErrorTarget): (...args: Args) => Promise<R>;
    withErrorTeedToState<Args extends unknown[], R>(f: (...args: Args) => R, target: ChatErrorTarget): (...args: Args) => R;
}

// @public
export class ChatError extends Error {
    constructor(target: ChatErrorTarget, innerError: Error, timestamp?: Date);
    innerError: Error;
    target: ChatErrorTarget;
    timestamp: Date;
}

// @public
export type ChatErrors = {
    [target in ChatErrorTarget]: ChatError;
};

// @public
export type ChatErrorTarget = 'ChatClient.createChatThread' | 'ChatClient.deleteChatThread' | 'ChatClient.getChatThreadClient' | 'ChatClient.listChatThreads' | 'ChatClient.off' | 'ChatClient.on' | 'ChatClient.startRealtimeNotifications' | 'ChatClient.stopRealtimeNotifications' | 'ChatThreadClient.addParticipants' | 'ChatThreadClient.deleteMessage' | 'ChatThreadClient.getMessage' | 'ChatThreadClient.getProperties' | 'ChatThreadClient.listMessages' | 'ChatThreadClient.listParticipants' | 'ChatThreadClient.listReadReceipts' | 'ChatThreadClient.removeParticipant' | 'ChatThreadClient.sendMessage' | 'ChatThreadClient.sendReadReceipt' | 'ChatThreadClient.sendTypingNotification' | 'ChatThreadClient.updateMessage' | 'ChatThreadClient.updateTopic';

// @public
export type ChatMessageWithStatus = ChatMessage & {
    clientMessageId?: string;
    status: MessageStatus;
};

// @public
export type ChatThreadClientState = {
    chatMessages: {
        [key: string]: ChatMessageWithStatus;
    };
    participants: {
        [key: string]: ChatParticipant;
    };
    threadId: string;
    properties?: ChatThreadProperties;
    readReceipts: ChatMessageReadReceipt[];
    typingIndicators: TypingIndicatorReceivedEvent[];
    latestReadTime: Date;
};

// @public
export type ChatThreadProperties = {
    topic?: string;
};

// @public
export const createStatefulChatClient: (args: StatefulChatClientArgs, options?: StatefulChatClientOptions) => StatefulChatClient;

// @internal
export const _createStatefulChatClientInner: (args: StatefulChatClientArgs, options?: StatefulChatClientOptions, telemetryImplementationHint?: _TelemetryImplementationHint) => StatefulChatClient;

// @internal
export const _createStatefulChatClientWithDeps: (chatClient: ChatClient, args: StatefulChatClientArgs, options?: StatefulChatClientOptions) => StatefulChatClient;

// @public
export interface StatefulChatClient extends ChatClient {
    getState(): ChatClientState;
    offStateChange(handler: (state: ChatClientState) => void): void;
    onStateChange(handler: (state: ChatClientState) => void): void;
}

// @public
export type StatefulChatClientArgs = {
    userId: CommunicationUserIdentifier;
    displayName: string;
    endpoint: string;
    credential: CommunicationTokenCredential;
};

// @public
export type StatefulChatClientOptions = {
    chatClientOptions: ChatClientOptions;
    maxStateChangeListeners?: number;
};

// (No @packageDocumentation comment for this package)

```
