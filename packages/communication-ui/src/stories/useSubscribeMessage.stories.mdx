import { useSubscribeMessage } from '../hooks';

<Meta title="Hooks/Chat/useSubscribeMessage" />

# useSubscribeMessage

The `useSubscribeMessage` hook allows components to subscribe to new message events. The hook takes in an optional
callback of the form `(messageEvent: ChatMessageReceivedEvent) => void` which will be called when a message has been
received. If the callback was not provided then by default the hook will add the message to ChatThreadProvider's
context. Note that this must be called even if you want to use the default behavior of having messages set to
ChatThreadProvider's context.

## Importing

```javascript
import { useSubscribeMessage } from '@azure/acs-ui-sdk';
```

## Dependencies

- ChatProvider
- ChatThreadProvider

## Usage

```jsx
import React from 'react';
import {
  ChatProvider,
  ChatThreadProvider,
  useSubscribeMessage
} from '@azure/acs-ui-sdk';

const Example = () => (
  <ChatProvider config={token: <TOKEN>, displayName: <DISPLAYNAME>, endpointUrl: <URL>, threadId: <THREADID>}>
    <ChatThreadProvider>
      <App />
    </ChatThreadProvider>
  </ChatProvider>
);

const App = () => {
  useEffect(() => {
    useSubscribeMessage();
    useSubscribeMessage((messageEvent: ChatMessageReceivedEvent) => {
      console.log(messageEvent);
    });
  }, []);
}
```
