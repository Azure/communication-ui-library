import { Canvas, Meta, Source, Story } from '@storybook/addon-docs/blocks';
import * as stories from './IdentityManagement.stories';

import CallBackendText from '!!raw-loader!./snippets/CallBackend.snippet.ts';
import ChatBackendText from '!!raw-loader!./snippets/ChatBackend.snippet.ts';

<Meta id="identitymanagement" title="Identity Managemment" />

# Identity Management

It is a primary tenet of Azure Communication Services that customers bring their own user identities. Customers
then use the Azure Communication Services identity service to create corresponding authentication tokens for
their users. Interaction with Azure Communication Services identity services is a privileged operation. Customers
should deploy a secure service for identity management that serves just the short-lived Azure Communication Services
identity tokens to the client application. These short-lived identity tokens are all that the client application
needs to interact with the Azure Communication Services like Chat and Calling.

## Calling

Azure Communication Services Calling SDK requires a user identity, token and an identifier for the call to join.

A typical implementation of the backend service that mints the user token might look so:

<Source code={CallBackendText} />

The following utility canvas is backed by the same logic to mint tokens. You can use this to generate the data needed for
the [`CallComposite` stories in this storybook](/?path=/story/composites-call--basic-example).

<Canvas withSource="none">
  <Story story={stories.CallBackend} />
</Canvas>

## Chat

Azure Communication Services Chat SDK requires a user identity and token. Additionally, participants in a chat must be explicitly
added to the chat thread (Compare this to Calling SDK, where a participant may join a call using the group ID).

A typical implementation of the backend service that mints the user tokens and adds them to a chat thread might look so:

<Source code={ChatBackendText} />

The following utility canvas is backed by the same logic to mint tokens and create threads. You can use this to generate the
data needed for the [`ChatComposite` stories in this storybook](/?path=/docs/composites-chat--basic-example).

<Canvas withSource="none">
  <Story story={stories.ChatBackend} />
</Canvas>
