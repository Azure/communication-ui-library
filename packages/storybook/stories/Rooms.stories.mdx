import { Meta, Source } from '@storybook/addon-docs';
import RoomsCallSnippetText from '!!raw-loader!./snippets/RoomsCall.snippet.tsx';

<Meta id="rooms" title="Concepts/Rooms" parameters={{ previewTabs: { canvas: { disable: true, hidden: true } } }} />

# Rooms

Rooms secures which users can join an ACS call. Rooms also assigns roles to users to limit their access in an ACS call.
Currently there are 3 pre-defined roles which are:

- Presenter
- Attendee
- Consumer

To learn more about the Rooms, click [here](https://docs.microsoft.com/en-us/azure/communication-services/concepts/rooms/room-concept)

## How does UI Library interact with Rooms

The UI Library helps Contoso create an end user experiences by providing a set of UI components or UI Composite experiences
to join a Rooms call.

Note: The UI Library is not for creating users, rooms, or adding users to rooms.

## Examples

Role based access control for an ACS call are important in many common scenarios such as:

- virtual visits (1:1 interactions)
- online class rooms (larger groups)
- presentations
- court trials
- debates

## Where does does Rooms fit in your architecture

The following diagram illustrates where Rooms and the UI Library will in your architecture

<img src="images/rooms_architecture.png" alt="Rooms architecture" />

To start a rooms call. first an ACS user need to be created. Learn more about this by using ACS identities [here](/?path=/docs/identity--page).
Next a room needs to be created using the Rooms Client. The Javascript implementation of the Rooms Client can be imported from this [repository](https://github.com/Azure/azure-sdk-for-js/tree/main/sdk/communication/communication-rooms/).
Then users are added to a room with an assigned role using the Rooms Client.
Once the user is added to the room, the user and their role (which can be retrieved from the Rooms Client) are passed to Call Composite.

Note: The role automatically obtained from Calling SDK by the Call composite based on the user in the future so passing the role to the Call Composite may no longer be needed.

## How to incorporate Rooms in your experience.

The following is a code snippet of how to connect the Call Composite to a rooms call given a roomId.

<Source code={RoomsCallSnippetText} />

Also, you can to try this <a href="./?path=/story/composites-call-joinexistingcall--join-existing-call&args=callType:Rooms" target="_blank">preview samples</a> to join an existing rooms call.

## FAQs

### Can the UI Library help me create a room?

No, the UI Library only allows a known user to join a room they have been already added too.
The Rooms Client is responsible for creating a room. The Javascript implementation can be imported from this [repository](https://github.com/Azure/azure-sdk-for-js/tree/main/sdk/communication/communication-rooms/)
We have quickstarts to allow you to set up a room and add that user to the room.

### Can the UI Library help me update the role of a participant?

No, this is done using the Rooms Client. The Javascript implementation can be imported from this [repository](https://github.com/Azure/azure-sdk-for-js/tree/main/sdk/communication/communication-rooms/)

### How do I get a known user to join a room?

That is out of scope but we do have identity quickstarts to set up new users.

### How come some of my buttons are greyed out when I am using the UI composite in the Room?

Depending on your role we only support a subset of capabilities. (E.g a presenter should be able to share their screen
but an attendee should not)

### Is Rooms ready for production loads?

Currently Rooms and the UI Library support for rooms are both in public preview. We definitely look forward to seeing how you
like this experience so we can create an amazing experience when the feature goes "General Available" in 2023.

### If I have found any issues with the CallComposite when interacting with a Room where can I go?

Feel free to log a [Github issue](https://github.com/Azure/communication-ui-library/issues) and someone from our team can work with you on your issue.
