import { Meta, Source } from '@storybook/addon-docs';
import RoomsCallSnippetText from '!!raw-loader!./snippets/RoomsCall.snippet.tsx';

<Meta id="rooms" title="Concepts/Rooms" parameters={{ previewTabs: { canvas: { disable: true, hidden: true } } }} />

# Rooms

Azure Communication Services introduces the concept of rooms for developers secure and organized conversations. Users must receive an invite to room in order to join the call for that room, offering a more secure alternative compared to group calls.

A user is invited to a room using the Rooms API as 1 of 3 following roles: 

- Presenter(default)
- Attendee
- Consumer

The distinction between each role lies in the capabilities they possess during a room call when utilizing the CallComposite. The specific capabilities associated with each role are detailed [here](https://learn.microsoft.com/en-us/azure/communication-services/concepts/rooms/room-concept#predefined-participant-roles-and-permissions).

The control of who can join calls, coupled with role-based capabilities, positions rooms as the ideal choice for the following call scenarios:

- Virtual visits
- Online classes
- Presentations
- Court trials
- Debates

## Rooms API

The Rooms API serves the purpose of creating rooms, managing users, and adjusting the lifetime of rooms. It is important to note that the Rooms API is a back-end service that is separate from the UI Library. The following diagram illustrates where Rooms API will fit in your architecture.

<img src="images/rooms-architecture.png" alt="Rooms architecture" />

A JavaScript quickstart for using the Rooms API is detailed [here](https://learn.microsoft.com/en-us/azure/communication-services/quickstarts/rooms/get-started-rooms?tabs=windows&pivots=programming-language-javascript). After a room is created and users are added to the room, the CallComposite from the UI Library allows users to join the room call.

### Creating a room

Here is the quickstart  [sample code](https://learn.microsoft.com/en-us/azure/communication-services/quickstarts/rooms/get-started-rooms?tabs=windows&pivots=programming-language-javascript#initialize-the-room) for creating a room.

### Add or update participants

Users are added to a room with an assigned role as shown in this quickstart [sample code](https://learn.microsoft.com/en-us/azure/communication-services/quickstarts/rooms/get-started-rooms?tabs=windows&pivots=programming-language-javascript#add-or-update-participants). Users can be created by using ACS identities [here](/?path=/docs/identity--page) and their user IDs would be used for the Rooms API.

## Joining a room with the CallComposite

The following is a code snippet of how to join a room call with the CallComposite.

<Source code={RoomsCallSnippetText} />

Also, you can to try this <a href="./?path=/story/composites-call-joinexistingcall--join-existing-call&args=callType:Rooms" target="_blank">preview sample</a> to join an existing room call.

## FAQs

### Can the UI Library create a room?

No, the Rooms API is responsible for creating rooms. Here is a [quickstart](https://learn.microsoft.com/en-us/azure/communication-services/quickstarts/rooms/get-started-rooms?tabs=windows&pivots=programming-language-javascript#create-a-room) showing how to create a room. After creating the room, you can assign its room ID into the CallAdapter locator so that the CallComposite can join that specific room.

### Can the UI Library invite a user to join a room?

No, the Rooms API is responsible for managing invites to a room on the server side. To get started, [here](https://learn.microsoft.com/en-us/azure/communication-services/quickstarts/rooms/get-started-rooms?tabs=windows&pivots=programming-language-javascript#add-or-update-participants) is some sample code in JavaScript.

### Can the UI Library update the role of a participant?

No, the Rooms API is responsible for managing invites to a room on the server side. [Here](https://learn.microsoft.com/en-us/azure/communication-services/quickstarts/rooms/get-started-rooms?tabs=windows&pivots=programming-language-javascript#add-or-update-participants) is some sample code in JavaScript to help you get started.

### How come some of my buttons are disabled when I am using the UI composite in the Room?

Some capabilities are not allowed for users based on their role. For example, a presenter is able to share their screen but an attendee cannot. You can review the roles and capabilities in this [table](https://docs.microsoft.com/en-us/azure/communication-services/concepts/rooms/room-concept#predefined-participant-roles-and-permissions).

### If I have found any issues with the rooms in the CallComposite where can I go?

Please log a [Github issue](https://github.com/Azure/communication-ui-library/issues), and someone from our team can work with you.
