import { Meta } from '@storybook/addon-docs/blocks';
import { Canvas, Description, Heading, Props, Source, Title } from '@storybook/addon-docs/blocks';

<Meta title="Stateful Client/React Hooks/UsePropsFor" />

# Hooks

[React Hooks](https://reactjs.org/docs/hooks-intro.html) allows developers to use state and other react features without writing a class component.

While you can choose any state management library such as Redux, we also provide a simple way to power react components with our Stateful SDK. We provide two [custom hooks](https://reactjs.org/docs/hooks-custom.html) in our library, [usePropsFor()](#usePropsFor) and [useSelector()](#useSelector), that allow you to subscribe to changes in the SDK state and bind to our UI components. After binding with the custom hooks a SDK state change will trigger a re-render of the UI component, and events on the component will call into the SDK clients.

## Before you start

Before you start, you need to wrap your whole App with Providers. They give you access to global variables (like Stateful ChatClient/CallClient) for our hooks to consume. There are different Providers for building apps with varying functionality:

### Chat

For your Chat app, use the `ChatClientProvider` and `ChatThreadClientProvider` to give hooks access to the `ChatClient` and `ChatThreadClient`. `StatefulChatClient` and `StatefulChatThreadClient` instances need to be passed to the Provider when you wrap your app, check [ChatSDKIntroduction]() to see how to create them.

```tsx
ReactDOM.render(
  <ChatClientProvider chatClient={statefulChatClient}>
    <ChatThreadClientProvider chatThreadClient={statefulChatThreadClient}>
      <App />
    <ChatThreadClientProvider>
  </ChatClientProvider>,
  document.getElementById('root')
);
```

### Calling

TBD

## usePropsFor() <a name="usePropsFor"></a>

```tsx
const result: any = usePropsFor(component: React.FunctionalComponent);
```

If you are using React Component from our communication-react components, usePropsFor is the go-to hook. It provides all the required props to power a feature component. It subscribes to state changes of stateful clients, gets props designed for your component, and triggers a new re-render whenever the props change.

Check [feature component list]() for supported components.

### _usePropsFor_ Example

```tsx
import React from 'react';
import { MessageThread } from '@azure/acs-chat-component';
import { useSelector } from '@azure/acs-chat-selector';

export const ChatScreen = () => {
  const props = usePropsFor(MessageThread);
  return <MessageThread {...props} />;
};
```

### Under the hood of usePropsFor()

usePropsFor() is a function that provides all you need to run a component in our library. It combines 2 tasks for generating the component's props for you:

1. Finds the right selector designed for the component, then call useSelector()
2. Constructs a set of handlers tailored for the component
