<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title>Basic example for CallComposite and ChatComposite</title>
</head>
<body>
  <div id="video-call"></div>
  <div id="chat"></div>
  <script src="./dist/bundle.js"></script>
  <script type="module">
    const { user, token } = await app.createUserWithToken();
    const displayName = 'Bob';

    const callAdapter = await app.loadCallComposite({
      containerId: 'video-call',
      groupId: '6e606975-7004-4c03-be37-e0851ed1850b', // any GUID
      displayName: displayName,
      userId: user,
      token: token
    });

    const threadId = await app.createChatThread();
    await app.addChatUser(threadId, user, displayName);
    const endpointUrl = await app.getEndpointUrl();

    const chatAdapter = await app.loadChatComposite({
      containerId: 'chat',
      groupId: '6e606975-7004-4c03-be37-e0851ed1850b', // any GUID
      displayName: displayName,
      threadId: threadId,
      endpointUrl: endpointUrl,
      userId: user,
      token: token
    });

    await chatAdapter.sendMessage('Hello to you! ðŸ‘‹');

    window.onbeforeunload = () => {
      callAdapter.dispose();
      chatAdapter.dispose();
    };
  </script>
</body>
